---
title: "[Network] UDP 소켓 프로그래밍"
date: 2012-05-17 06:14
layout: post
category: Network
tags:
  - TIL
  - Netwrok
  - Socket
comments: true
---

﻿그냥 과제하다가 삘받아서 작성하는 포스트-0-ㅋ 미쳤나보다

아... 삘받아서 작성하고있는데 중간에 날아가버렸다...-0-

갑자기 할 마음이 사라졌는데...... 아오 이왕 시작한거 끝까지 포스팅해야짘ㅋㅋㅋㅋㅋ

<!-- more -->

----



> 이 포스팅은 기존 개발 블로그에서 백업한 포스팅입니다.
>
> * 원문 : https://syung1104.blog.me/157846303



----



## UDP

**UDP**는 user datagram protocold의 약자로서,

정보를 서로 주고받는 방식이 아닌 한쪽에서 일방적으로 보내는 방식의 프로토콜을 말한다.

DNS, NFS, SNMP, syslog등 에서 사용된다.

Error Control(오류제어) 및 Flow Control(흐름제어) 기능이 없어 '신뢰성이 낮다'고 표현된다.

즉, 보내는 쪽은 받는쪽에서 데이터를 정상적으로 받았는지, 받지못하였는지를 확인하지 않는다.

(확인할 수 없으며 확인 할 필요도 없이 만들어져 있다)

자료의 순서 및 경로를 설정하지 않아 '비연결형(connection-less)'이라고도 표현된다.

빠른시간내에 전송되는 특징이 있다. (체크를 하지 않아서 인듯)


보통 상대되는 개념인 TCP와 자주 비교하는데,

UDP와 TCP모두 IP를 기반으로 데이터를 전송한다. (공통점!)

흐름제어를 하지 않는다는점, 그래서 데이터전송을 보장받지 못한 다는 점(손실/에러발생가능)

연결설정 및 연결 종료과정이 존재하지 않아 연결상태 또한 존재하지 않는다는 점이 차이점이다^^!

![img](http://cfile232.uf.daum.net/image/170AED154A66B051C879DA)

위의 그림과 같이 포트정보에 따라 프로세스를 구분하며

UDP 패킷을 '데이터 그램(Datagram)'이라고 부르기도 한다!

이제 본격적으로 UDP기반 서버 / 클라이언트 구현을 해보자!

데이터를 주고받기 위해 소켓을 사용하는데,

잠시 소켓에 대해서 알아보자^^!

인터넷상의 데이터들은 데이터그램이라는 한정된 크기의 '패킷'형태로 존재한다.

데이터그램은 헤더와 페이로드(Payload)로 구성되어 있고,

페이로드에 실제 데이터(전송하고자 하는 데이터)가 포함된다.

이렇게 데이터그램은 크기가 한정되어 있으므로

그 크기보다 더 큰 데이터들은 여러 패킷으로 나누어져 전송되게 될것이다.

따라서 이러한 패킷들이 전송중 일부가 소멸될수도 있고, 순서가 섞일 수도 있으므로

소멸 및 손상시에는 재전송, 순서가 섞일 시에는 순서재조정이 필요하다.

이러한 이유로 결국 이러한 과정을 처리해주기위한 프로그램이 복잡해지게 될 것이다.

이러한 문제의 해결책으로 '소켓(Socket)'이 등장하였다!

소켓이란, 네트워크 작업을 바이트 단위로 읽고 쓸 수 있는 스트림처럼 처리할수 있게 하는 것을 말한다.

즉, 데이터를 전송하는 과정을 소켓이 처리하는 것이다.

소켓덕분에 우리는 네트워크의 하위단계에서 일어나는

매체타입/패킷크기/패킷의재전송/네트워크주소 등을 인지하지 않아도 된다!!

(이런걸 보통 '추상화'라고 부른다)

결론은 소켓짱ㅋ

굿ㅋ

패킷을 편지라고 비유한다면,

소켓은 우체통이라고 비유 할 수 있다.

우체통이 하나만 존재하여도 편지를 여러개 가질 수 있는 것처럼

소켓 또한 하나만 생성해도 된다^^

말이 너무 길어졌는데@.@

이제 정말!! 본격적으로 UDP기반의 서버와 클라이언트를 구현하는 소켓프로그래밍을 해보잨ㅋㅋㅋ

앞에서 얘기하였듯이, UDP는 비연결 프로토콜이기 때문에 주소정보를 필요로 한다!

일단 서버 / 클라이언트 프로그램의 전체적인 데이터 전송흐름을 그림으로 살펴보자

![img](http://c2down.cyworld.co.kr/download?fid=64222de193171057ec122e36c2da7612&name=1.jpg)

일단 서버프로그램을 살펴보자

<서버 프로그램>

1. 연결 준비 단계

1) 소켓생성 : 네트워크 통신을 위해 소켓을 생성한다.



```
#include <sys/types.h>
#include <sys/socket.h> 
intsocket(int domain,int type,int protocol);
```

 **- int domain :** 인터넷으로 통신할지, 같은 시스템내에서 프로세스끼리 통신할지를 결정

(AF_INET : IPv4 인터넷 프로토콜을 사용한다는 뜻)

**- int type :** 데이터의 전송 형태를 지정한다

(SOCK_STREAM : TCP, SOCK_DGRAM : UDP)

**- int protocol :** 통신에 있어서 특정 프로토콜 사용을 지정하기 위한 변수이다.

(보통 0 을 사용한다.)

**- Return Value : 실패시 -1이 반환 된다! 그 외의 숫자들이 반환될 시에는 성공!**

2) Bind함수



3) 파일 송/수신 함수

4) 

**참고사이트 :** 

http://www.cyworld.com/zoot0134/5752922

http://blog.daum.net/sdr1982/7027352

http://thdev.net/175

네이버백과사전

그리고..... 데이터통신 실습자룤ㅋㅋ